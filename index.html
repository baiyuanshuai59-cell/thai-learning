<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <title>æ³°è½»æ¾ Pro v47 - è¯­éŸ³åŒ…ä¸“äº«ç‰ˆ</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        :root { --primary: #be123c; /* æ³°å¼çº¢ */ }
        html { height: auto; min-height: 100%; }
        body { 
            font-family: system-ui, -apple-system, sans-serif; 
            background: #fff1f2; color: #334155;
            min-height: 100vh; overflow-y: auto !important;
            -webkit-overflow-scrolling: touch;
            display: flex; flex-direction: column;
        }
        @media (min-width: 1024px) {
            body { height: 100vh; overflow: hidden; flex-direction: row; }
            .sidebar { position: relative; transform: none; width: 300px; height: 100%; box-shadow: none; border-right: 1px solid #fecdd3;}
            .main-content { height: 100%; overflow-y: auto; padding-bottom: 0; }
            .mobile-fab { display: none !important; }
        }
        .sidebar { 
            width: 85%; max-width: 320px; background: white; 
            display: flex; flex-direction: column; shrink-0; 
            position: fixed; top: 0; bottom: 0; left: 0; 
            transform: translateX(-100%); 
            transition: transform 0.3s cubic-bezier(0.4, 0, 0.2, 1); 
            z-index: 2000; box-shadow: 10px 0 25px -5px rgba(0,0,0,0.1);
            height: 100%; pointer-events: none;
        }
        .sidebar.open { transform: translateX(0); pointer-events: auto; }
        .overlay { display: none; position: fixed; inset: 0; background: rgba(0,0,0,0.6); z-index: 1500; backdrop-filter: blur(2px); }
        .overlay.show { display: block; }
        .main-content { flex: 1; width: 100%; padding-bottom: 160px; }
        .nav-header { padding: 16px; background: #ffe4e6; font-weight: 900; color: #9f1239; font-size: 1rem; border-bottom: 1px solid #fecdd3; position: sticky; top: 0; z-index: 10; }
        .nav-item { padding: 14px 20px; font-size: 15px; cursor: pointer; border-left: 4px solid transparent; border-bottom: 1px solid #fff1f2; color: #475569; display: block; background: #fff; }
        .nav-item.active { background: #fff1f2; color: var(--primary); border-left-color: var(--primary); font-weight: 700; }
        .static-card {
            background: white; border: 1px solid #fecdd3; border-radius: 24px; padding: 24px;
            text-align: center; box-shadow: 0 4px 20px rgba(190, 18, 60, 0.05);
            width: 100%; max-width: 400px; display: flex; flex-direction: column; gap: 8px; margin: 0 auto;
        }
        .card-thai { font-size: 3.5rem; font-weight: 900; color: #9f1239; line-height: 1.2; }
        .card-mean { font-size: 2rem; font-weight: 800; color: #0f172a; margin: 4px 0; }
        .mnemonic-box { background: #fff1f2; border: 1px solid #fb7185; border-radius: 12px; padding: 12px; margin-top: 8px; }
        .brick { background: white; border: 1px solid #cbd5e1; border-radius: 10px; padding: 8px; text-align: center; flex: 1; min-width: 65px; box-shadow: 0 1px 2px rgba(0,0,0,0.05); transition: all 0.2s; }
        .brick-th { color: #9f1239; font-weight: 800; font-size: 1rem; }
        .brick-rd { color: #dc2626; font-size: 0.8rem; font-weight: bold; }
        .mobile-fab {
            position: fixed; bottom: 40px; left: 50%; transform: translateX(-50%);
            background: #be123c; color: white; padding: 12px 30px; border-radius: 50px;
            font-weight: bold; box-shadow: 0 8px 20px rgba(190, 18, 60, 0.4);
            z-index: 1000; display: flex; items-center; gap: 8px; cursor: pointer;
            border: 1px solid rgba(255,255,255,0.2); white-space: nowrap; pointer-events: auto;
        }
    </style>
</head>
<body>

<audio id="global-player" style="display:none;" controls></audio>
<div id="overlay" class="overlay" onclick="ui.toggleSidebar()"></div>

<aside class="sidebar">
    <div class="p-6 bg-rose-700 text-white shrink-0">
        <h1 class="font-black text-xl tracking-tight uppercase">Thai Easy v47</h1>
        <p class="text-xs text-rose-200 mt-1">æœ¬åœ°é«˜æ¸…è¯­éŸ³åŒ…</p>
    </div>
    <nav id="nav-target" class="flex-1 overflow-y-auto pb-10"></nav>
</aside>

<div id="mobile-fab" class="mobile-fab" onclick="ui.toggleSidebar()">
    <span>ğŸ“‚</span> æ‰“å¼€ç›®å½•
</div>

<main class="main-content">
    <header class="p-4 bg-white border-b border-rose-100 flex items-center justify-between sticky top-0 z-20 shadow-sm">
        <div class="flex items-center gap-3">
            <button onclick="ui.toggleSidebar()" class="p-2 bg-rose-50 text-rose-600 rounded-lg md:hidden">â˜°</button>
            <span id="header-title" class="font-bold text-slate-700 truncate max-w-[200px]">è¯·é€‰æ‹©å•è¯</span>
        </div>
    </header>

    <div class="p-4 lg:p-8" id="content-area">
        <div id="view-welcome" class="text-center py-12">
            <div class="text-8xl mb-4">ğŸ†</div>
            <h2 class="text-2xl font-black text-slate-800 mb-2">v47 æœ€ç»ˆå½¢æ€</h2>
            <p class="text-slate-500 text-sm mb-8">è¯·ç¡®ä¿å·²ä¸Šä¼  audio æ–‡ä»¶å¤¹</p>
            <button onclick="app.loadWord(0,0)" class="bg-rose-600 text-white px-8 py-3 rounded-full font-bold shadow-lg active:scale-95 transition">å¼€å§‹å­¦ä¹ </button>
        </div>

        <div id="view-study" class="hidden flex flex-col lg:flex-row gap-6 items-start">
            <div class="w-full lg:w-1/3 flex flex-col items-center">
                <div class="static-card">
                    <div class="card-thai" id="d-th">...</div>
                    <div class="card-roma text-slate-400 italic" id="d-rd">...</div>
                    <div class="card-mean" id="d-zh">...</div>
                    <div class="w-full h-px bg-slate-100 my-2"></div>
                    <div class="mnemonic-box">
                        <div class="text-xs font-bold text-rose-600 uppercase mb-1">ä¸­æ–‡è”æƒ³è®°å¿†</div>
                        <div class="mnem-word text-2xl font-black text-rose-500" id="d-mnem">...</div>
                        <div class="mnem-desc text-sm text-slate-500" id="d-desc">...</div>
                    </div>
                    <button onclick="app.speakWord()" class="mt-4 bg-rose-50 text-rose-600 border border-rose-200 px-6 py-3 rounded-full font-bold active:bg-rose-100 transition flex justify-center items-center gap-2">
                        <span>ğŸ”Š</span> å¬å•è¯å‘éŸ³
                    </button>
                </div>

                <div class="flex gap-3 w-full max-w-sm mt-4">
                    <button onclick="app.prev()" class="flex-1 py-3 bg-white border border-slate-200 rounded-xl font-bold text-slate-500 active:bg-slate-50">ä¸Šä¸€ä¸ª</button>
                    <button onclick="app.next()" class="flex-1 py-3 bg-slate-900 text-white rounded-xl font-bold shadow-lg active:bg-slate-800">ä¸‹ä¸€ä¸ª</button>
                </div>
            </div>

            <div class="w-full lg:w-2/3">
                <div class="bg-white border border-rose-100 p-4 rounded-xl shadow-sm mb-4">
                    <h3 class="font-bold text-rose-800">å®æˆ˜åœºæ™¯æ‹†è§£</h3>
                    <p class="text-xs text-rose-500 opacity-80">ç‚¹å‡»ä¸‹æ–¹æŒ‰é’®æ’­æ”¾</p>
                </div>
                <div id="sentences-box" class="space-y-4"></div>
            </div>
        </div>
    </div>
</main>

<script>
    // === æœ¬åœ°éŸ³é¢‘å¼•æ“ ===
    // å‡è®¾ audio æ–‡ä»¶å¤¹å·²ä¸Šä¼ åˆ°å’Œ index.html åŒçº§ç›®å½•
    const AudioEngine = {
        playLocal(filename) {
            const player = document.getElementById('global-player');
            // è·¯å¾„æŒ‡å‘æœ¬åœ° audio æ–‡ä»¶å¤¹
            player.src = `audio/${filename}`;
            player.play().catch(e => {
                alert("æ’­æ”¾å¤±è´¥ï¼šæœªæ‰¾åˆ°éŸ³é¢‘æ–‡ä»¶ã€‚\nè¯·ç¡®è®¤æ‚¨å·²å°† audio æ–‡ä»¶å¤¹ä¸Šä¼ åˆ° GitHub ä»“åº“ï¼");
            });
        }
    };

    // æ•°æ®ç»“æ„ä¿æŒä¸å˜ï¼Œä½†ä¸ºäº†èŠ‚çœç¯‡å¹…ï¼Œè¿™é‡Œåªæ”¾å‰ä¸¤ä¸ªç« èŠ‚ç¤ºæ„
    // å®é™…ä½¿ç”¨æ—¶ï¼Œè¯·æŠŠä¹‹å‰ v33 ä¸­çš„ FULL_DATA å®Œæ•´å¤åˆ¶è¿‡æ¥
    const FULL_DATA = [
        {
            name: "ç¬¬ä¸€ç« ï¼šç¤¾äº¤ç”Ÿå­˜", icon: "ğŸ¤",
            words: [
                { t: "à¸ªà¸§à¸±à¸ªà¸”à¸µ", r: "Sa-wa-dee", m: "è¨-ç“¦-è¿ª", mean: "ä½ å¥½", desc: "æ¯å¤©(è¨)å“‡ä¸€å£°ï¼Œ(ç“¦)ç‰‡è½åœ°ï¼Œ(è¿ª)ç¡®æœ‰ç¤¼è²Œã€‚", sentences: [{zh:"ä½ å¥½ï¼Œå¾ˆé«˜å…´è®¤è¯†ä½ ", bricks:[{t:"à¸ªà¸§à¸±à¸ªà¸”à¸µ",r:"è¨ç“¦è¿ª",m:"ä½ å¥½"},{t:"à¸¢à¸´à¸™à¸”à¸µ",r:"é“¶è¿ª",m:"é«˜å…´"},{t:"à¸—à¸µà¹ˆà¹„à¸”à¹‰",r:"æè¢‹",m:"èƒ½"},{t:"à¸£à¸¹à¹‰à¸ˆà¸±à¸",r:"å¢æ‰",m:"è®¤è¯†"}]}, {zh:"è€å¸ˆå¥½", bricks:[{t:"à¸ªà¸§à¸±à¸ªà¸”à¸µ",r:"è¨ç“¦è¿ª",m:"ä½ å¥½"},{t:"à¸„à¸¸à¸“à¸„à¸£à¸¹",r:"å¤å“­",m:"è€å¸ˆ"}]}, {zh:"å¤§å®¶å¥½", bricks:[{t:"à¸ªà¸§à¸±à¸ªà¸”à¸µ",r:"è¨ç“¦è¿ª",m:"ä½ å¥½"},{t:"à¸—à¸¸à¸à¸„à¸™",r:"åœŸå¤",m:"å¤§å®¶"}]}] },
                { t: "à¸‚à¸­à¸šà¸„à¸¸à¸“", r: "Khop-khun", m: "é -å¤", mean: "è°¢è°¢", desc: "æœ‰äº†ä¾(é )ï¼Œå°±è¦æ„Ÿè°¢ä¹¾(å¤)ã€‚", sentences: [{zh:"éå¸¸æ„Ÿè°¢", bricks:[{t:"à¸‚à¸­à¸šà¸„à¸¸à¸“",r:"é å¤",m:"è°¢è°¢"},{t:"à¸¡à¸²à¸",r:"é©¬å…‹",m:"éå¸¸"}]}, {zh:"è°¢è°¢ä½ çš„ç¤¼ç‰©", bricks:[{t:"à¸‚à¸­à¸šà¸„à¸¸à¸“",r:"é å¤",m:"è°¢è°¢"},{t:"à¸ªà¸³à¸«à¸£à¸±à¸š",r:"è¨æ‹‰",m:"å¯¹äº"},{t:"à¸‚à¸­à¸‡à¸‚à¸§à¸±à¸",r:"ç©ºæ¬¾",m:"ç¤¼ç‰©"}]}, {zh:"è°¢è°¢å¸®å¿™", bricks:[{t:"à¸‚à¸­à¸šà¸„à¸¸à¸“",r:"é å¤",m:"è°¢è°¢"},{t:"à¸—à¸µà¹ˆà¸Šà¹ˆà¸§à¸¢",r:"æå¹",m:"å¸®å¿™"}]}] },
                // ... (è¯·åŠ¡å¿…åœ¨è¿™é‡Œå¡«å…¥ä¹‹å‰çš„å®Œæ•´æ•°æ®ï¼Œä¿è¯ chapter, word ç´¢å¼•å¯¹é½) ...
                // æš‚æ—¶åªå†™ä¸¤ä¸ªç¤ºä¾‹ï¼Œæ‚¨éœ€è¦æŠŠä¹‹å‰çš„æ•°æ®å…¨éƒ¨å¡«å›æ¥ï¼Œå¦åˆ™ audio æ–‡ä»¶åå¯¹ä¸ä¸Š
            ]
        }
        // ... å…¶ä»–ç« èŠ‚ ...
    ];

    const app = {
        m: 0, w: 0,
        renderNav() {
            const nav = document.getElementById('nav-target');
            let html = "";
            FULL_DATA.forEach((module, mi) => {
                html += `<div class="nav-header"><span>${module.icon}</span> <span>${module.name}</span></div>`;
                module.words.forEach((word, wi) => {
                    const active = (this.m === mi && this.w === wi) ? 'active' : '';
                    html += `<div class="nav-item ${active}" onclick="app.loadWord(${mi}, ${wi})">
                                ${wi + 1}. ${word.mean} (${word.t})
                             </div>`;
                });
            });
            nav.innerHTML = html;
        },
        loadWord(mi, wi) {
            this.m = mi; this.w = wi;
            this.renderNav();
            document.getElementById('view-welcome').classList.add('hidden');
            document.getElementById('view-study').classList.remove('hidden');
            
            // æ•°æ®å®¹é”™ï¼Œé˜²æ­¢æ•°ç»„è¶Šç•Œ
            if (!FULL_DATA[mi] || !FULL_DATA[mi].words[wi]) return;

            const data = FULL_DATA[mi].words[wi];
            document.getElementById('header-title').innerText = `${FULL_DATA[mi].name} > ${data.mean}`;
            document.getElementById('d-th').innerText = data.t;
            document.getElementById('d-rd').innerText = data.r;
            document.getElementById('d-zh').innerText = data.mean;
            document.getElementById('d-mnem').innerText = data.m;
            document.getElementById('d-desc').innerText = data.desc;

            document.getElementById('sentences-box').innerHTML = data.sentences.map((s, sentenceIdx) => {
                // ç”Ÿæˆå¯¹åº”çš„æ–‡ä»¶å: c{ç« }-w{è¯}-s{å¥}.mp3
                const filename = `c${mi}-w${wi}-s${sentenceIdx}.mp3`;
                
                return `<div class="bg-white p-4 rounded-xl shadow-sm border border-rose-100 mb-2">
                    <div class="flex justify-between items-center mb-3">
                        <div class="text-sm font-bold text-gray-500">ğŸ§ ${s.zh}</div>
                        <button onclick="AudioEngine.playLocal('${filename}')" class="text-xs font-bold text-rose-600 bg-rose-50 px-3 py-1 rounded-full border border-rose-200">ğŸ”Š æ’­æ”¾</button>
                    </div>
                    <div class="flex flex-wrap gap-2">${s.bricks.map(b=>`<div class="brick"><div class="brick-th">${b.t}</div><div class="brick-rd">${b.r}</div></div>`).join('')}</div>
                </div>`;
            }).join('');
            
            if(window.innerWidth < 1024) { ui.closeSidebar(); window.scrollTo(0,0); }
        },
        next() { 
            // ç®€å•çš„ç¿»é¡µé€»è¾‘
            if(this.w < FULL_DATA[this.m].words.length - 1) this.loadWord(this.m, this.w + 1); 
            else if(this.m < FULL_DATA.length - 1) this.loadWord(this.m + 1, 0); 
        },
        prev() { 
            if(this.w > 0) this.loadWord(this.m, this.w - 1); 
            else if(this.m > 0) this.loadWord(this.m - 1, FULL_DATA[this.m-1].words.length - 1); 
        },
        speakWord() { 
            // ç”Ÿæˆå•è¯å¯¹åº”çš„æ–‡ä»¶å: c{ç« }-w{è¯}-main.mp3
            const filename = `c${this.m}-w${this.w}-main.mp3`;
            AudioEngine.playLocal(filename);
        }
    };

    const ui = {
        toggleSidebar() { document.querySelector('.sidebar').classList.toggle('open'); document.querySelector('.overlay').classList.toggle('show'); },
        closeSidebar() { document.querySelector('.sidebar').classList.remove('open'); document.querySelector('.overlay').classList.remove('show'); }
    };

    app.renderNav();
</script>
</body>
</html>
